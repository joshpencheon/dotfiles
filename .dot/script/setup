#!/bin/bash

# ====== Use up-to-date bash by default ======

if command -v brew > /dev/null; then
  brewed_bash="$(brew --prefix)/bin/bash"
  if [ -x $brewed_bash ]; then
    if ! fgrep -q "$brewed_bash" /etc/shells; then
      echo "$brewed_bash" | sudo tee -a /etc/shells;
      chsh -s $brewed_bash;
    fi;
  fi;
fi;

# ====== Install NeoVim plugins ======

nvim --headless -c 'autocmd User PackerComplete quitall' -c 'PackerSync'

# ====== Compile bat themes ======

if command -v bat > /dev/null; then
  bat cache --build
else
  echo "Warning: skipping bat theme completion"
fi
